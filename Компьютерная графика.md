# Компьютерная графика

## 1. Цветовые системы RGB и CMYK

### Цветовая система RGB

RGB (Red, Green, Blue) – аддитивная цветовая модель, основанная на смешении трех основных цветов: красного, зеленого и синего. Эта система используется для отображения цветов на электронных устройствах (мониторах, экранах смартфонов, телевизорах).

**Принципы работы RGB:**
- Основана на излучении света (аддитивное смешение)
- При смешении всех трех компонентов с максимальной интенсивностью получается белый цвет
- При отсутствии всех компонентов получается черный цвет
- Каждый компонент обычно кодируется 8 битами (значения 0-255)

**Представление некоторых цветов в RGB:**
- Черный: (0, 0, 0)
- Белый: (255, 255, 255)
- Красный: (255, 0, 0)
- Зеленый: (0, 255, 0) 
- Синий: (0, 0, 255)
- Желтый: (255, 255, 0)
- Пурпурный: (255, 0, 255)
- Голубой: (0, 255, 255)

### Цветовая система CMYK

CMYK (Cyan, Magenta, Yellow, Key/Black) – субтрактивная цветовая модель, используемая преимущественно в полиграфии и других печатных технологиях.

**Принципы работы CMYK:**
- Основана на поглощении света (субтрактивное смешение)
- При отсутствии всех компонентов получается белый цвет (цвет бумаги)
- При смешении голубого, пурпурного и желтого теоретически должен получаться черный, но на практике получается темно-коричневый, поэтому добавляется четвертый компонент – черный (K)
- Компоненты выражаются в процентах от 0% до 100%

**Представление некоторых цветов в CMYK:**
- Черный: (0%, 0%, 0%, 100%)
- Белый: (0%, 0%, 0%, 0%)
- Красный: (0%, 100%, 100%, 0%)
- Зеленый: (100%, 0%, 100%, 0%)
- Синий: (100%, 100%, 0%, 0%)
- Голубой: (100%, 0%, 0%, 0%)
- Пурпурный: (0%, 100%, 0%, 0%)
- Желтый: (0%, 0%, 100%, 0%)

### Сравнение RGB и CMYK

| Характеристика | RGB | CMYK |
|----------------|-----|------|
| Принцип смешения | Аддитивный (добавление света) | Субтрактивный (поглощение света) |
| Применение | Цифровые дисплеи | Печать на бумаге |
| Базовый цвет | Черный (0,0,0) | Белый (0,0,0,0) |
| Полное смешение | Белый (255,255,255) | Черный (теоретически 100,100,100,0) |
| Цветовой охват | Шире, чем CMYK | Уже, чем RGB |

## 2. Гистограммы тоновых изображений

Гистограмма тонового изображения – графическое представление распределения яркостей пикселей в изображении. По горизонтальной оси откладываются уровни яркости (обычно 0-255), по вертикальной – количество пикселей с данным уровнем яркости.

**Анализ гистограммы позволяет определить:**
- Общую яркость изображения (смещение гистограммы влево – темное, вправо – светлое)
- Контрастность (узкая гистограмма – низкий контраст, широкая – высокий контраст)
- Наличие областей с потерей деталей (пики на краях гистограммы)
- Преобладающие тона (пики на гистограмме)

### Выравнивание гистограммы

Выравнивание гистограммы (histogram equalization) – метод обработки изображений, который улучшает контраст путем "растяжения" динамического диапазона яркостей.

**Алгоритм выравнивания гистограммы:**
1. Построение гистограммы исходного изображения
2. Расчет функции кумулятивного распределения (CDF)
3. Нормализация CDF для получения новых значений яркости
4. Преобразование яркостей пикселей исходного изображения согласно новой функции

**Математически это выражается формулой:**
```
g(i) = round((L-1) × cdf(i))
```
где:
- g(i) – новое значение яркости
- L – количество уровней яркости (обычно 256)
- cdf(i) – нормализованная кумулятивная функция распределения

### Матрицы совместной встречаемости уровней серого тона

Матрица совместной встречаемости уровней серого тона (Gray Level Co-occurrence Matrix, GLCM) – инструмент для анализа текстуры изображения, который учитывает пространственные отношения между пикселями.

**GLCM характеризует, как часто разные комбинации яркостей пикселей встречаются в изображении при заданном пространственном отношении.**

**Формирование GLCM:**
1. Выбор направления и расстояния между пикселями
2. Подсчет количества пар пикселей с яркостями i и j
3. Формирование матрицы, где элемент (i,j) содержит число таких пар

**На основе GLCM вычисляются различные характеристики текстуры:**
- Энергия – мера однородности изображения
- Контраст – мера локальных вариаций
- Корреляция – мера линейной зависимости
- Гомогенность – мера близости распределения к диагонали
- Энтропия – мера неупорядоченности

## 3. Линейная и нелинейная фильтрации тоновых изображений

### Линейная фильтрация

Линейная фильтрация – процесс обработки изображения, при котором значение яркости каждого пикселя заменяется взвешенной суммой яркостей соседних пикселей. Математически это описывается операцией свертки (convolution).

**Основные типы линейных фильтров:**

1. **Сглаживающие фильтры (фильтры низких частот):**
   - Фильтр усреднения (box filter):
     ```
     h = 1/9 × [ 1 1 1 ]
                [ 1 1 1 ]
                [ 1 1 1 ]
     ```
   - Гауссовский фильтр:
     ```
     h = 1/16 × [ 1 2 1 ]
                 [ 2 4 2 ]
                 [ 1 2 1 ]
     ```

2. **Фильтры подчеркивания краев (фильтры высоких частот):**
   - Лапласиан:
     ```
     h = [ 0 -1  0 ]
         [-1  4 -1 ]
         [ 0 -1  0 ]
     ```
   - Операторы Собеля:
     ```
     h_x = [ -1 0 1 ]
           [ -2 0 2 ]
           [ -1 0 1 ]
     ```

### Нелинейная фильтрация

Нелинейная фильтрация – процесс обработки изображения, при котором значение яркости каждого пикселя заменяется результатом некоторой нелинейной функции от яркостей соседних пикселей.

**Основные типы нелинейных фильтров:**

1. **Медианный фильтр:**
   - Заменяет значение пикселя на медиану значений в его окрестности
   - Эффективен для удаления импульсного шума ("соль и перец")
   - Хорошо сохраняет границы объектов

2. **Ранговые фильтры:**
   - Минимальный фильтр (эрозия) – заменяет пиксель на минимальное значение в окрестности
   - Максимальный фильтр (дилатация) – заменяет пиксель на максимальное значение в окрестности

3. **Билатеральный фильтр:**
   - Учитывает как близость пикселей в пространстве, так и близость их яркостей
   - Сглаживает изображение, сохраняя края
   - Используется для удаления шума с сохранением деталей

**Сравнение линейной и нелинейной фильтрации:**

| Характеристика | Линейная фильтрация | Нелинейная фильтрация |
|----------------|---------------------|------------------------|
| Математическая модель | Свертка | Различные нелинейные операции |
| Влияние на края | Часто размывает | Часто сохраняет |
| Удаление импульсного шума | Малоэффективно | Эффективно |
| Вычислительная сложность | Обычно ниже | Обычно выше |

## 4. Использование видового и перспективного преобразований при построении изображений трехмерных объектов

### Видовое преобразование

Видовое преобразование (view transformation) – преобразование координат объектов из мировой системы координат в видовую систему координат, связанную с наблюдателем (камерой).

**Основные параметры видового преобразования:**
- Положение камеры (eye point)
- Точка, на которую направлена камера (look-at point)
- Вектор, указывающий направление "вверх" (up vector)

**Матрица видового преобразования:**
```
V = R × T
```
где:
- R – матрица поворота, выравнивающая оси координат с осями камеры
- T – матрица переноса, перемещающая начало координат в точку расположения камеры

### Перспективное преобразование

Перспективное преобразование (perspective transformation) – проецирование трехмерных объектов на двумерную плоскость с учетом эффекта перспективы, при котором более удаленные объекты выглядят меньше.

**Основные параметры перспективного преобразования:**
- Угол обзора (field of view, FOV)
- Соотношение сторон экрана (aspect ratio)
- Расстояние до ближней плоскости отсечения (near clipping plane)
- Расстояние до дальней плоскости отсечения (far clipping plane)

**Матрица перспективного преобразования создает усеченную пирамиду видимости (frustum).**

**Полный конвейер преобразований для построения 3D-изображений:**
1. Модельное преобразование – из локальной системы координат объекта в мировую
2. Видовое преобразование – из мировой системы в систему координат камеры
3. Перспективное преобразование – проецирование на плоскость изображения
4. Переход к экранным координатам – преобразование координат проекции в координаты пикселей

## 5. Алгоритмы удаления невидимых линий при построении каркасных моделей трехмерных объектов

Каркасная модель (wireframe model) – представление трехмерного объекта в виде набора линий (ребер), соединяющих вершины объекта.

### Основные алгоритмы удаления невидимых линий:

1. **Алгоритм Робертса:**
   - Один из первых алгоритмов удаления невидимых линий
   - Работает с выпуклыми многогранниками
   - Ребро считается видимым, если хотя бы один из инцидентных ему многоугольников обращен к наблюдателю

2. **Алгоритм художника (Painter's algorithm):**
   - Основан на принципе рисования от дальних объектов к ближним
   - Все многоугольники сортируются по расстоянию от наблюдателя
   - Отрисовываются в порядке от дальних к ближним
   - Может иметь проблемы с циклическими перекрытиями

3. **Z-буфер (буфер глубины):**
   - Для каждого пикселя экрана хранится z-координата (глубина) ближайшей точки
   - При обработке новой точки ее z-координата сравнивается с сохраненной
   - Если новая точка ближе, ее координаты и цвет записываются в буферы
   - Наиболее распространенный алгоритм в современной компьютерной графике

4. **Алгоритм плавающего горизонта:**
   - Специализированный алгоритм для функциональных поверхностей
   - Подходит для поверхностей вида z = f(x,y)
   - Построчная обработка изображения с отслеживанием верхнего и нижнего "горизонтов"

5. **BSP-деревья (Binary Space Partitioning):**
   - Разделение пространства плоскостями объектов
   - Создание бинарного дерева для определения порядка отрисовки
   - Обход дерева в зависимости от положения наблюдателя
   - Эффективен для статических сцен

## 6. Сегментация тоновых изображений

Сегментация изображения – процесс разделения изображения на несколько сегментов (областей, объектов) с похожими характеристиками. Целью сегментации является упрощение и/или изменение представления изображения для облегчения его анализа.

### Основные методы сегментации:

1. **Пороговая сегментация (Thresholding):**
   - Разделение пикселей по уровню яркости
   - Порог может быть глобальным или адаптивным
   - Метод Оцу – автоматическое определение оптимального порога
   - Простота реализации, но ограниченная эффективность

2. **Сегментация на основе обнаружения краев:**
   - Выделение краев с помощью операторов Собеля, Канни и др.
   - Связывание краев для формирования замкнутых контуров
   - Чувствительность к шуму и проблемы с формированием замкнутых областей

3. **Сегментация методом разрастания областей (Region growing):**
   - Начинается с "семян" – начальных пикселей
   - Область расширяется, включая соседние пиксели с похожими свойствами
   - Хорошо работает для однородных областей, но чувствительна к выбору начальных точек

4. **Сегментация методом водораздела (Watershed):**
   - Изображение рассматривается как топографическая поверхность
   - "Затопление" начинается с локальных минимумов
   - Границы формируются на "водоразделах"
   - Склонность к избыточной сегментации

5. **Сегментация методом кластеризации:**
   - Группировка пикселей в кластеры по их характеристикам
   - Алгоритмы K-средних, нечеткие C-средние
   - Не требует предварительной информации о форме объектов

6. **Сегментация на основе графов:**
   - Изображение представляется как граф, где вершины – пиксели
   - Разрез графа минимизирует функцию энергии
   - Глобальный подход к сегментации, но высокая вычислительная сложность

**Оценка качества сегментации:**
- Визуальная оценка
- Сравнение с эталонной сегментацией
- Количественные метрики (точность, коэффициент Дайса, IoU)

Выбор метода сегментации зависит от характеристик изображения, требуемой точности и вычислительных ресурсов.